<nav class="navbar sticky-top navbar-expand-md navbar-light">
  <div class="navbar-collapse collapse" id="collapsingNavbar">
    <ul class="navbar-nav">
      <li class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <a class="nav-link" routerLink="">Net-Project</a>
      </li>
      <li *ngIf="user && role === 'USER'" class="nav-item" routerLinkActive="active">
         <a class="nav-link" routerLink="wallet">Wallet</a>
       </li>
       <li *ngIf="user && role === 'USER'" class="nav-item" routerLinkActive="active">
         <a class="nav-link" routerLink="subscriptions">Subscriptions</a>
       </li>
       <li *ngIf="user && role === 'ADMIN'" class="nav-item">
         <a class="nav-link" routerLink="users">Users</a>
       </li>
      <li *ngIf="user && role === 'ADMIN'">
        <a class="btn btn-info btn-nav addition" routerLink="new-addition">New Addition</a>
      </li>
       <li *ngIf="user && role === 'ADMIN'">
         <a class="btn btn-info btn-nav post" routerLink="new-post">New Post</a>
       </li>
      <li *ngIf="user && role === 'ADMIN'">
        <a class="btn btn-info btn-nav post" routerLink="new-package">New Package</a>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <!--<li>-->
        <!--<a id="lang" class="btn btn-info btn-lang">{{ _otherLanguage(currentUser) }}</a>-->
      <!--</li>-->
      <li *ngIf="user">
        <a id="nick" class="nav-link">{{ user.sub }}</a>
      </li>
      <li *ngIf="user">
        <a id="btn-nav" class="btn btn-info" (click)="signOut()">Sign Out</a>
      </li>
      <li *ngIf="!user">
        <a id="btn-nav" class="btn btn-info" (click)="_openModal(template)">Log In</a>
      </li>
    </ul>
  </div>
</nav>
<ng-template #template>
  <div class="modal-header">
          <h1 class="modal-title">Net-Project</h1>
      </div>
        <div class="modal-body">
        <div class="form-group">
          <input type="text" class="form-control ng-pristine ng-touched ng-invalid" name="login" placeholder="username or email" [(ngModel)]="loginUser.login" #login="ngModel" required>
        </div>
          <div [hidden]="login.untouched || login.valid" class="alert alert-danger text-center">
            Login field is empty
          </div>
            <div class="form-group">
          <input type="password" class="form-control ng-pristine ng-touched ng-invalid" name="password" placeholder="password" [(ngModel)]="loginUser.password" #password="ngModel" required>
        </div>
          <div [hidden]="password.untouched || login.valid" class="alert alert-danger text-center">
            Password field is empty
          </div>
          <input type="button" value="Log In" (click)="authorizate()" [disabled]="login.invalid || password.invalid">
          <div class="social">
            <a href="#"><span class="fa fa-facebook"></span></a>
            <a href="#"><span class="fa fa-google-plus"></span></a>
          </div>
        </div>
        <div class="modal-footer">
          <div class="links">
            <a class="left"(click)="_closeModal(); _openModal(signup)">Register</a>
            <a class="center" (click)="_closeModal()">Go to Site</a>
            <a (click)="_closeModal(); _openModal(forgot)">Forgot password</a>
          </div>
        </div>
</ng-template>

<ng-template #signup>
  <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)"
               size = "medium" color="fff"
               type="ball-newton-cradle"></ngx-spinner>
  <div class="modal-header">
    <h1 class="modal-title">Net-Project</h1>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <input type="text" class="form-control ng-pristine ng-invalid" name="login" placeholder="username" [(ngModel)]="newUser.login" #loginSign="ngModel" required
             pattern="^[\w.-]{0,19}[0-9a-zA-Z]$"/>
    </div>
    <div [hidden]="loginSign.valid" class="alert alert-danger text-center">
      Login must end with a letter
    </div>
    <div class="form-group">
      <input type="text" class="form-control ng-pristine ng-invalid ng-touched" name="email" placeholder="email" [(ngModel)]="newUser.email" #email="ngModel" required
             />
    </div>
    <div [hidden]="email.valid || email.untouched" class="alert alert-danger text-center">
      Email must end with a letter
    </div>
    <div class="form-group">
      <input type="password" class="form-control ng-pristine ng-invalid ng-touched" name="password" placeholder="password" [(ngModel)]="newUser.password" #passwordSign="ngModel" required
             />
    </div>
    <div [hidden]="passwordSign.valid || passwordSign.untouched" class="alert alert-danger text-center">
      Password should contain at least one number and one sign
    </div>
    <input type="button" value="Sign Up" (click)="signUp()" [disabled]="loginSign.invalid || email.invalid || passwordSign.invalid">
  </div>
  <div class="modal-footer">
    <div class="links">
      <a class="left"(click)="_closeModal(); _openModal(template)">Back</a>
      <a class="center" (click)="_closeModal()">Go to Site</a>
      <a (click)="_closeModal(); _openModal(forgot)">Forgot password</a>
    </div>
  </div>
</ng-template>

<ng-template #forgot>
  <div class="modal-header">
    <h1 class="modal-title">Net-Project</h1>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <input type="text" class="form-control ng-pristine ng-invalid ng-touched" name="email" placeholder="email" [(ngModel)]="newUser.email" #emailForgot="ngModel" required
             pattern='/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/"'/>
    </div>
    <div [hidden]="emailForgot.valid || emailForgot.untouched" class="alert alert-danger text-center">
      Email must end with a letter
    </div>
    <input type="button" value="Sent pass" (click)="_closeModal()" [disabled]="emailForgot.invalid">
  </div>
  <div class="modal-footer">
    <div class="links">
      <a class="left" (click)="_closeModal()">Go to Site</a>
    </div>
  </div>
</ng-template>
